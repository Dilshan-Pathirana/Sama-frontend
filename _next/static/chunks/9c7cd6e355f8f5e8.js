(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,s,t)=>{s.exports=e.r(76562)},13278,e=>{"use strict";var s=e.i(43476),t=e.i(71645),i=e.i(18566);function a(){let[e,a]=(0,t.useState)(null),[n,l]=(0,t.useState)(""),[d,r]=(0,t.useState)(!1),[c,o]=(0,t.useState)([]),[h,x]=(0,t.useState)(!0),m=(0,i.useRouter)();(0,t.useEffect)(()=>{!async function(){x(!0);let e=await fetch("/api/user/profile");if(401===e.status)return m.push("/auth/login");let s=await e.json();a(s),l(s.name);let t=await fetch("/api/user/rental-history");o(await t.json()),x(!1)}()},[m]);let u=async()=>{await fetch("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n})}),r(!1),a(e=>e?{...e,name:n}:e)};return h?(0,s.jsx)("div",{children:"Loading..."}):e?(0,s.jsxs)("div",{className:"max-w-2xl mx-auto p-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"My Profile"}),(0,s.jsxs)("div",{className:"mb-6 bg-white rounded shadow p-4",children:[(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("b",{children:"Email:"})," ",e.email]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("b",{children:"Name:"})," ",d?(0,s.jsx)("input",{className:"border px-2 py-1 rounded",value:n,onChange:e=>l(e.target.value)}):e.name]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("b",{children:"Role:"})," ",e.role]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("b",{children:"Verified:"})," ",e.verified?"Yes":"No"]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("b",{children:"Joined:"})," ",new Date(e.createdAt).toLocaleDateString()]}),(0,s.jsx)("div",{children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"bg-blue-500 text-white px-3 py-1 rounded mr-2",onClick:u,children:"Save"}),(0,s.jsx)("button",{className:"bg-gray-300 px-3 py-1 rounded",onClick:()=>r(!1),children:"Cancel"})]}):(0,s.jsx)("button",{className:"bg-blue-500 text-white px-3 py-1 rounded",onClick:()=>r(!0),children:"Edit"})})]}),(0,s.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Rental History"}),(0,s.jsx)("div",{className:"bg-white rounded shadow p-4",children:0===c.length?(0,s.jsx)("div",{children:"No rentals yet."}):(0,s.jsx)("ul",{children:c.map(e=>(0,s.jsxs)("li",{className:"mb-4 border-b pb-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Status:"})," ",e.status]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Period:"})," ",new Date(e.startDate).toLocaleDateString()," - ",new Date(e.endDate).toLocaleDateString()]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Total Price:"})," ",e.totalPrice]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Booked:"})," ",new Date(e.createdAt).toLocaleDateString()]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Items:"})," ",e.items.map(e=>e.equipment.name).join(", ")]})]},e.id))})})]}):(0,s.jsx)("div",{children:"Profile not found."})}e.s(["default",()=>a])}]);